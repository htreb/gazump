<ng-template #loadingContacts>
  <app-loading></app-loading>
</ng-template>
<ng-template #noContacts>
  <app-empty-list [customMessage]="'No matching contacts'"></app-empty-list>
</ng-template>

<ion-item lines="none">
  <app-tip [text]="membersTip" slot="end"></app-tip>
</ion-item>
<div class="title">Members</div>
<div class='contact-picker'>
  <ion-searchbar
    #searchBar
    (ionChange)="updateSearchTerm(searchBar.value)"
    color="secondary"
  >
  </ion-searchbar>
  <div class='contact-list'>
    <ng-container *ngIf="filteredContacts$ | async as contacts">
      <ng-container *ngIf="!contacts.loading; else loadingContacts">
        <ion-list *ngIf="contacts.length; else noContacts">
          <ion-item *ngFor="let contact of contacts">
            <ion-label class="ion-text-wrap">
              <ion-text>
                <h2>{{ contact.userName }}</h2>
              </ion-text>
              <ion-text color="primary">
                <p>{{ contact.email }}</p>
              </ion-text>
            </ion-label>
            <ion-checkbox
              slot="end"
              (ionChange)="contactSelected($event.detail.checked, contact.id)"
              [checked]="selectedContacts.indexOf(contact.id) > -1"
            >
            </ion-checkbox>
          </ion-item>
        </ion-list>
      </ng-container>
    </ng-container>
  </div>
</div>