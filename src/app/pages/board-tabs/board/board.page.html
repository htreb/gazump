<div class="board"
  [@showing]="showing ? 'active' : 'hidden'"

  cdkDropList
  cdkDropListOrientation = 'horizontal'
  [cdkDropListData]="data?.states"
  (cdkDropListDropped)="columnDrop($event)"
>
  <ion-card
    *ngFor="let column of data?.states; let i = index; trackBy: columTrackBy"
    cdkDrag
    class="column"
    color="medium"
  >
    <ion-card-header class='header'>
      <ion-card-subtitle>{{ column.title }}</ion-card-subtitle>
      <ion-icon class='drag-handle' src='/assets/icons/drag.svg'></ion-icon>
    </ion-card-header>
    <div
      *ngIf="data?.tickets && data.tickets[column.state] || [] as tickets"
      cdkDropList
      id="{{data.id | lowercase}}{{i}}"
      [cdkDropListConnectedTo]="getColumnIds()"
      [cdkDropListData]="{state: column.state, tickets: tickets}"
      (cdkDropListDropped)="ticketDrop($event)"
      class="ticket-drop-zone"
    >
      <ion-card
        *ngFor="let ticket of tickets; trackBy: ticketTrackBy"
        cdkDrag
        color="light"
        class="ticket"
        (click)="openTicketDetail(ticket)"
      >
        <div class='title'>{{ticket.title}}</div>
        <div class='description'>{{ticket.description}}</div>
      </ion-card>
    </div>
  </ion-card>
</div>
