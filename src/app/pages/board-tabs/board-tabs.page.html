<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Board</ion-title>
  </ion-toolbar>
</ion-header>

<ng-template #loading>
  <div class="loading">
    <ion-spinner name="dots" class="spinner-dots"></ion-spinner>
  </div>
</ng-template>

<ng-template #noBoards>
  <div class="no-boards">
    There are no boards yet,<br />
    start one below!
  </div>
</ng-template>

<ng-container *ngIf="boardsForGroup$ | async as boards; else loading">
  <ng-container *ngIf="boards.length; else noBoards">
    <ion-content forceOverscroll="false" scrollX="true" #content>


      <!-- TODO should I just pass all the boards data to the board component
      and let it handle it there? Looping and creating board instances which are not seen seems unnecessary -->
      <ng-container *ngFor="let board of boards">
        <board
          *ngIf="board.id === currentBoard"
          [groupId]="groupId"
          [currentBoardId]="currentBoard"
          [boardData]="board"
          [content]='content'
        ></board>
      </ng-container>
    </ion-content>

    <ion-footer>
      <ion-segment scrollable (ionChange)="boardChanged($event)">
        <ion-segment-button
          *ngFor="let board of boards"
          [value]="board.id"
          [checked]="!currentBoard || board.id === currentBoard"
        >
          <ion-label>{{ board.title }}</ion-label>
        </ion-segment-button>
      </ion-segment>
    </ion-footer>
  </ng-container>
</ng-container>
